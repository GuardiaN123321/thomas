<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Подключаем API -->
    <!-- Подробнее https://tech.yandex.ru/maps/doc/jsapi/2.1/dg/concepts/load-docpage/ -->
    <script src="https://api-maps.yandex.ru/2.1/?apikey=7d91c039-34be-4b95-ae85-993713240020&lang=ru_RU" type="text/javascript">
    </script>
</head>
<body>

<!-- Создаём контейнер для карты -->
<div id="map" style="width: 100%; height: 920px"></div>

<!-- Создаём карту -->
<script type="text/javascript">
    // Функция ymaps.ready() будет вызвана, когда
    // загрузятся все компоненты API, а также когда будет готово DOM-дерево.
    ymaps.ready(init);

function init() {
     var location = ymaps.geolocation;
var myMap = new ymaps.Map('map', {
    center: [55.76, 37.64],
    zoom: 10
}, {
    searchControlProvider: 'yandex#search'
});

// Получение местоположения и автоматическое отображение его на карте.
location.get({
        mapStateAutoApply: true
    })
.then(
    function(result) {
        // Получение местоположения пользователя.
        var userAddress = result.geoObjects.get(0).properties.get('text');
        var userCoodinates = result.geoObjects.get(0).geometry.getCoordinates();
        result.geoObjects.options.set('preset', 'islands#blackStretchyIcon');
        result.geoObjects.options.set('draggable', 'true');
        // Пропишем полученный адрес в балуне.
        result.geoObjects.get(0).properties.set({
            type: "Point",
            iconContent: 'Помогите',
            hintContent: 'SOS',
            balloonContentBody: 'Начальный адрес: ' + userAddress +
                                '<br/>Начальные координаты:' + userCoodinates
    });
        myMap.geoObjects.add(result.geoObjects)
    },
    function(err) {
        console.log('Ошибка: ' + err)
    }
);
}
</script>
</body>
</html>
